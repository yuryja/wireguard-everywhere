{% extends "layout.html" %}

{% block content %}
<nav>
    <ul>
        <li><a href="{{ url_for('index') }}">{{ _('back_dashboard') }}</a></li>
    </ul>
</nav>

<hgroup>
    <h1>{{ _('settings') }}</h1>
    <h2>{{ _('system_info') }}</h2>
</hgroup>

<div class="grid">
    <div>
        <article>
            <header>{{ _('change_password') }}</header>
            <form method="post">
                <input type="hidden" name="action" value="change_password">
                
                <label for="current_password">{{ _('current_password') }}</label>
                <input type="password" id="current_password" name="current_password" required>
                
                <label for="new_password">{{ _('new_password') }}</label>
                <input type="password" id="new_password" name="new_password" required minlength="8">
                
                <label for="confirm_password">{{ _('confirm_password') }}</label>
                <input type="password" id="confirm_password" name="confirm_password" required minlength="8">
                
                <button type="submit">{{ _('update_password') }}</button>
            </form>
        </article>
    </div>

    <div>
        <article>
            <header>{{ _('system_info') }}</header>
            <table role="grid">
                <tr>
                    <th scope="row">{{ _('wireguard_version') }}</th>
                    <td><code>Latest</code></td>
                </tr>
                <tr>
                    <th scope="row">{{ _('web_interface') }}</th>
                    <td>v1.1.0</td>
                </tr>
                <tr>
                    <th scope="row">{{ _('internal_ip') }}</th>
                    <td>10.7.0.1</td>
                </tr>
            </table>
        </article>

        <article>
            <header>{{ _('activity_log') }}</header>
            <div style="max-height: 400px; overflow-y: auto;">
                <table role="grid" class="striped">
                    <thead>
                        <tr>
                            <th>{{ _('action') }}</th>
                            <th>{{ _('time') }}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for log in logs %}
                        <tr>
                            <td>
                                <strong>{{ log.username }}</strong>: {{ log.action }}<br>
                                <small>{{ log.details }}</small>
                            </td>
                            <td style="font-size: 0.8rem; white-space: nowrap;">
                                {{ log.created_at }}
                            </td>
                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="2" style="text-align: center;">{{ _('no_logs') }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </article>
    </div>
</div>
{% endblock %}
